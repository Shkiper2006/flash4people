# Flash4People на Windows Server 2025 — запуск “для чайника”

Ниже инструкция, как запустить мессенджер на VDS под Windows Server 2025, чтобы клиенты заходили в браузере по адресу сервера.

---

## 1) Установите Node.js (LTS)

1. Откройте сайт: https://nodejs.org  
2. Скачайте **LTS**-версию для Windows.
3. Установите, оставляя параметры по умолчанию.
4. Проверьте установку:

```powershell
node -v
npm -v
```

Должны отобразиться версии.

---

## 2) Скачайте проект на сервер

Вариант A (если есть Git):

```powershell
git clone <URL_ВАШЕГО_РЕПОЗИТОРИЯ> C:\flash4people
```

Вариант B (без Git):

1. Скачайте ZIP с проектом.
2. Распакуйте в `C:\flash4people`.

Проверьте структуру:

```
C:\flash4people
  ├─ client
  ├─ server
  └─ docs
```

---

## 3) Установка зависимостей и запуск

Откройте PowerShell (обычный или от администратора) и выполните:

```powershell
cd C:\flash4people\server
npm install
node index.js
```

В консоли появится:

```
Server running on port 3001
```

Теперь сервер и клиент доступны по адресу:

```
http://<IP_СЕРВЕРА>:3001
```

---

## 4) Откройте порт в брандмауэре Windows

1. Откройте **Windows Defender Firewall with Advanced Security**.
2. Слева выберите **Inbound Rules** → справа **New Rule**.
3. Тип правила: **Port**.
4. Протокол: **TCP**, порт: **3001**.
5. Разрешить соединение.
6. Применить для всех профилей.
7. Назовите правило, например `Flash4People 3001`.

---

## 5) Запуск как служба (чтобы стартовал после перезагрузки)

Самый простой способ — **NSSM**:

1. Скачайте NSSM: https://nssm.cc/download
2. Распакуйте `nssm.exe`, например в `C:\nssm\nssm.exe`
3. В PowerShell от имени администратора:

```powershell
C:\nssm\nssm.exe install flash4people
```

4. В открывшемся окне:
   - **Application**: `C:\Program Files\nodejs\node.exe`
   - **Arguments**: `C:\flash4people\server\index.js`
   - **Startup directory**: `C:\flash4people\server`
5. Нажмите **Install service**.
6. Запуск службы:

```powershell
net start flash4people
```

---

## 6) Где лежат данные

Все данные в одном файле:

```
C:\flash4people\server\DB.dat
```

Файлы/картинки, отправленные в чат:

```
C:\flash4people\server\uploads
```

### Резервная копия

1. Остановите службу:
```powershell
net stop flash4people
```
2. Скопируйте `DB.dat` и папку `uploads` в безопасное место.
3. Запустите службу обратно:
```powershell
net start flash4people
```

---

## 7) Как пользоваться

1. Откройте в браузере `http://<IP_СЕРВЕРА>:3001`
2. Зарегистрируйтесь или войдите.
3. Создайте комнату (кнопка “Создать” в боковой панели).
4. В комнате:
   - отправляйте текст, файлы, картинки, эмодзи;
   - включайте голосовой чат;
   - выбирайте микрофон;
   - делайте демонстрацию экрана.
5. Приглашайте онлайн-пользователей кнопкой “+” возле их имени.
6. Приглашение действует 5 минут, потом автоматически отклоняется.

---

## 8) Важно про голосовой чат

Браузеры требуют **HTTPS** для доступа к микрофону и демонстрации экрана,
если это не `localhost`.

Если планируете использовать голосовой чат удалённо:

1. Настройте HTTPS (например через Nginx + сертификат Let's Encrypt),
2. Тогда используйте `https://<domain>` вместо `http://`.

